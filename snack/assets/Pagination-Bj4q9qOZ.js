import{j as i}from"./jsx-runtime-BTJTZTIL.js";import{r as c}from"./index-CJ_LmFaV.js";import{g as f}from"./getRange-CHNeUywO.js";import{C as S}from"./index-BKaanG2n.js";import{C as H}from"./index-DLGJiw2b.js";import{e as E}from"./componentPropsProcessors-UJEZy8aQ.js";import{B as x}from"./ButtonFunction-DkDZEdUd.js";const q={S:"s"},A={Button:"button"},L=c.createContext({size:q.S,variant:A.Button}),G=()=>c.useContext(L);var b=(e=>(e.Page="page",e.Break="break",e))(b||{});function d(e){return{kind:"page",page:e}}function g(e,t){return{kind:"break",start:e,end:t}}function I(e){const{firstPage:t,lastPage:u,currentPage:a,maxLength:r}=e,s=r-5,o=r-2;function l(){return u<=r?null:a<o?0:u+t-a<o?2:1}return{firstPage:t,lastPage:u,currentPage:a,currentPageSiblingsCount:s,displayedPagesCount:o,groupPosition:l()}}function $(e){const{firstPage:t,lastPage:u,displayedPagesCount:a}=e,r=t,s=a;return[...f(r,s).map(d),g(s+1,u-1),d(u)]}function z(e){const{firstPage:t,lastPage:u,currentPage:a,currentPageSiblingsCount:r}=e,s=Math.floor(a-r/2),o=Math.floor(a+r/2),l=f(s,o).map(d);return[d(t),g(t+1,s-1),...l,g(o+1,u-1),d(u)]}function O(e){const{firstPage:t,lastPage:u,displayedPagesCount:a}=e,r=u+t-a,o=f(r,u).map(d);return[d(t),g(t+1,r-1),...o]}const w={0:$,1:z,2:O};function W(e){const t=I(e);return t.groupPosition===null?f(t.firstPage,t.lastPage).map(d):w[t.groupPosition](t)}const X="_pageButton_odr6n_1",k={pageButton:X};function m({label:e,activated:t,onClick:u,href:a,setButtonRef:r,...s}){const{size:o,variant:l}=G();return l==="link"?i.jsx("a",{role:"button",className:k.pageButton,onClick:u,ref:r,"data-size":o,...E(s),"data-activated":t||void 0,href:a,children:e}):i.jsx("button",{type:"button",className:k.pageButton,onClick:u,ref:r,"data-size":o,...E(s),"data-activated":t||void 0,children:e})}try{m.displayName="PageButton",m.__docgenInfo={description:"",displayName:"PageButton",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string | number"}},activated:{defaultValue:null,description:"",name:"activated",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"(event: MouseEvent<HTMLAnchorElement | HTMLButtonElement, MouseEvent>) => void"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},setButtonRef:{defaultValue:null,description:"",name:"setButtonRef",required:!1,type:{name:"Ref<HTMLAnchorElement | HTMLButtonElement>"}}}}}catch{}function v({start:e,end:t,onClick:u}){const a=()=>u(e,t);return i.jsx(m,{label:"...",onClick:a,"data-test-id":`page-more-button-${e}-${t}`})}try{v.displayName="PageMoreButton",v.__docgenInfo={description:"",displayName:"PageMoreButton",props:{start:{defaultValue:null,description:"",name:"start",required:!0,type:{name:"number"}},end:{defaultValue:null,description:"",name:"end",required:!0,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"(start: number, end: number) => void"}}}}}catch{}function h({page:e,onClick:t,hrefFormatter:u,activated:a,setButtonRef:r}){const s=l=>t(e,l),o=u&&u(e);return i.jsx(m,{label:e,onClick:s,activated:a,"aria-current":a?"page":void 0,"data-test-id":`page-number-button-${e}`,setButtonRef:r,href:o})}try{h.displayName="PageNumberButton",h.__docgenInfo={description:"",displayName:"PageNumberButton",props:{page:{defaultValue:null,description:"",name:"page",required:!0,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"(page: number, event?: MouseEvent<HTMLAnchorElement | HTMLButtonElement, MouseEvent> | undefined) => void"}},activated:{defaultValue:null,description:"",name:"activated",required:!1,type:{name:"boolean"}},setButtonRef:{defaultValue:null,description:"",name:"setButtonRef",required:!1,type:{name:"Ref<HTMLAnchorElement | HTMLButtonElement>"}},hrefFormatter:{defaultValue:null,description:"",name:"hrefFormatter",required:!1,type:{name:"((page: number) => string)"}}}}}catch{}const Z="_pagination_6n2qb_1",J={pagination:Z},p=1,V=1,Q=7;function M({total:e,page:t,onChange:u,hrefFormatter:a,className:r,variant:s=A.Button,size:o=q.S,maxLength:l=Q,...j}){const N=W({firstPage:p,lastPage:e,currentPage:t,maxLength:l}),_=c.useRef([]),[y,P]=c.useState(-1);c.useEffect(()=>{var n;(n=_.current[y])==null||n.focus()},[y]);const T=()=>{const n=t-V;u(n),n===p&&P(p)},D=()=>{const n=t+V;u(n),n===e&&P(e)},F=(n,B)=>{const C=Math.floor((n+B)/2);u(C),P(C)},R=n=>{if(n.kind===b.Page)return i.jsx("li",{children:i.jsx(h,{page:n.page,activated:n.page===t,onClick:u,setButtonRef:B=>{_.current[n.page]=B},hrefFormatter:a})},n.page);if(n.kind===b.Break)return i.jsx("li",{children:i.jsx(v,{start:n.start,end:n.end,onClick:F})},`${n.start}-${n.end}`)};return i.jsx(L.Provider,{value:{size:o,variant:s},children:i.jsx("nav",{className:r,...E(j),children:i.jsxs("ul",{className:J.pagination,children:[i.jsx("li",{children:i.jsx(x,{icon:i.jsx(S,{}),onClick:T,disabled:t===p,"data-test-id":"page-prev-button",size:o})}),N.map(R),i.jsx("li",{children:i.jsx(x,{icon:i.jsx(H,{}),onClick:D,disabled:t===e,"data-test-id":"page-next-button",size:o})})]})})})}try{M.displayName="Pagination",M.__docgenInfo={description:"",displayName:"Pagination",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},total:{defaultValue:null,description:"Общее количество страниц",name:"total",required:!0,type:{name:"number"}},page:{defaultValue:null,description:"Текущая страница",name:"page",required:!0,type:{name:"number"}},variant:{defaultValue:{value:"button"},description:"Варианты тега кнопок: <a/> или <button/>",name:"variant",required:!1,type:{name:"enum",value:[{value:'"link"'},{value:'"button"'}]}},maxLength:{defaultValue:{value:"7"},description:"Максимальное количество страниц/элементов, помещающихся до транкейта",name:"maxLength",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"Колбэк смены значения",name:"onChange",required:!0,type:{name:"(page: number, event?: MouseEvent<HTMLAnchorElement | HTMLButtonElement, MouseEvent> | undefined) => void"}},hrefFormatter:{defaultValue:null,description:"Колбэк форматирования ссылки",name:"hrefFormatter",required:!1,type:{name:"((page: number) => string)"}},className:{defaultValue:null,description:"CSS класснейм",name:"className",required:!1,type:{name:"string"}},size:{defaultValue:{value:"s"},description:"Размер",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"xs"'}]}}}}}catch{}export{M as P};
