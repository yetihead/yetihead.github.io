import{j as e}from"./jsx-runtime-BTJTZTIL.js";import{r as c}from"./index-CJ_LmFaV.js";import{e as E,c as T,a as L,b as z,h as V,f as $,g as K,s as U,S as q,N as G}from"./styles.module-CyMN61d1.js";import{c as v}from"./index-DUmpqB7p.js";import{S as W}from"./Skeleton-Cf0sBfNU.js";import{D as J}from"./DropList-sYSbfSyD.js";import{B as H}from"./ButtonSimple-3o_8XXbq.js";import{T as Q}from"./Tag-CalHVeMA.js";import{K as Y}from"./index-CIcT2jya.js";import{S as P}from"./SkeletonText-DP-re6Ou.js";import{I as X}from"./index-BkOiuzeN.js";import{T as C}from"./Typography-DmSN6cv6.js";import{e as O}from"./componentPropsProcessors-UJEZy8aQ.js";import{T as Z}from"./TruncateString-BPmgFnBz.js";import{C as ee}from"./ChipToggle-ByWNmm4-.js";import{B as te}from"./ButtonFunction-DkDZEdUd.js";import{S as ne}from"./Scroll-B3e6J9cA.js";import{W as ue}from"./WithSkeleton-BvFnKWIX.js";import{P as ie}from"./index-C9_U387z.js";import"./index-ChsGqxH_.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-C-NxZ9RO.js";import"./ButtonTonal-BgeMe9qu.js";import"./utils-Ct1D1GSP.js";import"./Counter-dO15w468.js";import"./Sun-CLMO8Tpr.js";import"./constants-BAH7I9kc.js";import"./Link-CwRw2bLJ.js";import"./helpers-DNSUdh_x.js";import"./index-Bxu_udwM.js";import"./index-DdXvKv-Q.js";import"./index-Chjiymov.js";import"./LocaleProvider-CyhbxqE1.js";import"./index-C7IVzcIX.js";import"./index-BLj3vrxU.js";import"./index-BQAaeyfQ.js";import"./ProgressBar-DoG3l5ps.js";import"./index-6PN_JoHT.js";import"./index-zbp_5bxn.js";import"./isBrowser-C2N6XvuH.js";import"./index-B7wZyJkK.js";import"./hooks-Cv-w_Cx5.js";import"./useValueControl-C51frgGe.js";import"./index-JZGyZbA2.js";import"./Checkbox-uZV6WJ28.js";import"./constants-BObEONKm.js";import"./TogglePrivate-BTSew7b5.js";import"./index-3XDw48l5.js";import"./index-DtRrUciF.js";import"./Switch-CYqDG2NM.js";import"./Dropdown-uG1Hplv7.js";import"./PopoverPrivate-CnKgsFAm.js";import"./useIsomorphicLayoutEffect-BAXQmlEq.js";import"./index-DLGJiw2b.js";import"./index-Baw9oej9.js";import"./Divider-C1X9zrkx.js";import"./Spinner-DZPrD8kc.js";import"./useButtonNavigation-CVCsehRW.js";import"./useClearButton-DMWmUR1d.js";import"./constants-9uwKbtvo.js";import"./InputPrivate-C6kWfrUd.js";import"./constants-BaREPXw5.js";import"./Tooltip-BNp3usZT.js";import"./IconPredefined-yX8Rdo-2.js";import"./ButtonFilled-DhU1yp3w.js";import"./constants-BIigMBdG.js";const m={title:"notification-panel__title",chip:"notification-panel__chip",settings:{droplist:"notification-panel__settings__droplist",droplistTrigger:"notification-panel__settings__droplist-trigger",droplistAction:"notification-panel__settings__droplist-action"},readAll:"notification-panel__readAll",footerButton:"notification-panel__footerButton",skeleton:"notification-panel__skeleton"};function ae(){return e.jsxs("div",{className:E.notificationCard,"data-test-id":m.skeleton,"data-skeleton":!0,children:[e.jsx(P,{width:140,typography:"label-s",lines:1}),e.jsxs("div",{className:E.notificationCardTitle,"data-center":!0,children:[e.jsx("div",{className:E.notificationCardTitleIcon,children:e.jsx(P,{width:16,typography:"title-s",lines:1})}),e.jsx(P,{width:140,typography:"title-s",lines:1})]}),e.jsx("div",{className:E.notificationCardContent,children:e.jsx(P,{lines:3,typography:"body-s"})}),e.jsxs("div",{className:E.notificationCardFooter,children:[e.jsx(P,{width:140,typography:"body-s",lines:1}),e.jsx(P,{width:140,typography:"label-s",lines:1})]})]})}function k({actions:t,button:i}){const[u,r]=c.useState(!1);return e.jsx(J,{trigger:"clickAndFocusVisible",open:u,onOpenChange:r,scroll:!0,placement:"bottom-end","data-test-id":m.settings.droplist,items:t.map(({icon:p,content:B,tagLabel:l,disabled:s,onClick:f})=>({onClick:_=>{r(!1),f==null||f(_)},disabled:s,content:B,beforeContent:p,afterContent:l?e.jsx(Q,{label:l}):void 0,"data-test-id":m.settings.droplistAction})),children:e.jsx(H,{...i})})}try{k.displayName="NotificationPanelSettingsDroplist",k.__docgenInfo={description:"",displayName:"NotificationPanelSettingsDroplist",props:{actions:{defaultValue:null,description:"",name:"actions",required:!0,type:{name:"Action[]"}},button:{defaultValue:null,description:"",name:"button",required:!0,type:{name:"ButtonSimpleProps"}}}}}catch{}function S({actions:t,button:i}){const u={...i,size:"s",icon:i.icon||e.jsx(Y,{}),"data-test-id":m.settings.droplistTrigger};return t!=null&&t.length?e.jsx(k,{actions:t,button:u}):e.jsx(H,{...u})}try{S.displayName="NotificationPanelSettings",S.__docgenInfo={description:"",displayName:"NotificationPanelSettings",props:{actions:{defaultValue:null,description:"Дополнительные действия панели",name:"actions",required:!1,type:{name:"Action[]"}},button:{defaultValue:null,description:"Кнопка дополнительного действия панели",name:"button",required:!0,type:{name:'Omit<ButtonSimpleProps, "data-test-id" | "label" | "size" | "type">'}}}}}catch{}const oe="_notificationPanelBlank_16cox_1",re={notificationPanelBlank:oe};function b({icon:t,className:i,...u}){return e.jsx(e.Fragment,{children:e.jsx(X,{...u,icon:t?{...t,appearance:t.appearance??"neutral"}:void 0,size:"l",align:"vertical",className:v(re.notificationPanelBlank,i)})})}try{b.displayName="NotificationPanelBlank",b.__docgenInfo={description:'Компонента для "заглушки" вместо карточек в панели',displayName:"NotificationPanelBlank",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Заголовок",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"Подзаголовок",name:"description",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка",name:"icon",required:!1,type:{name:'Pick<IconPredefinedProps, "appearance" | "icon" | "decor">'}}}}}catch{}const le="_notificationPanelDivider_1tj1o_1",se={notificationPanelDivider:le};function j({text:t,className:i,...u}){return e.jsx(C.LightLabelS,{className:v(se.notificationPanelDivider,i),...O(u),children:t})}try{j.displayName="NotificationPanelDivider",j.__docgenInfo={description:"Разделитель для группировки или разделения карточек в списке",displayName:"NotificationPanelDivider",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"Текст разделителя",name:"text",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const de="_notificationPanelHeader_1g2r2_1",ce="_notificationPanelChips_1g2r2_28",pe="_notificationPanelHeaderFunctions_1g2r2_34",me="_notificationPanelHeadline_1g2r2_40",fe="_notificationPanelTitle_1g2r2_47",ge="_notificationPanelBody_1g2r2_52",_e="_notificationPanelFooterButton_1g2r2_61",ye="_wrapper_1g2r2_99",Pe="_scrollStub_1g2r2_107",d={notificationPanelHeader:de,notificationPanelChips:ce,notificationPanelHeaderFunctions:pe,notificationPanelHeadline:me,notificationPanelTitle:fe,notificationPanelBody:ge,notificationPanelFooterButton:_e,wrapper:ye,scrollStub:Pe};function o({title:t,settings:i,chips:u,readAllButton:r,footerButton:p,content:B,loading:l,skeletonsAmount:s=2,scrollEndRef:f,scrollContainerRef:_,className:D,...y}){const g=c.useMemo(()=>Array.from({length:s},(a,N)=>N),[s]);return e.jsxs("div",{className:v(d.wrapper,D),...O(y),children:[e.jsxs("div",{className:d.notificationPanelHeader,children:[e.jsxs("div",{className:d.notificationPanelHeadline,children:[e.jsx(C.SansHeadlineS,{className:d.notificationPanelTitle,children:e.jsx(Z,{text:t,"data-test-id":m.title})}),i&&e.jsx(S,{...i})]}),e.jsxs("div",{className:d.notificationPanelHeaderFunctions,children:[e.jsx("div",{className:d.notificationPanelChips,children:u==null?void 0:u.map(a=>c.createElement(ee,{...a,key:a.label,"data-test-id":`${m.chip}-${a.label}`,size:"xs",disabled:a.disabled||l}))}),r&&e.jsx(te,{...r,size:"xs",disabled:r.disabled||l,"data-test-id":m.readAll})]})]}),e.jsxs(ne,{size:"m",className:d.notificationPanelBody,ref:_,children:[B,l&&e.jsx(W,{loading:l||!1,children:g.map(a=>e.jsx(ue,{skeleton:e.jsx(ae,{})},a))}),e.jsx("div",{className:d.scrollStub,ref:f})]}),p&&e.jsx("button",{type:"button",onClick:p.onClick,className:d.notificationPanelFooterButton,"data-test-id":m.footerButton,children:e.jsx(C.SansLabelS,{children:p.label})})]})}(t=>{t.Blank=b,t.Divider=j})(o||(o={}));try{o.displayName="NotificationPanel",o.__docgenInfo={description:"Компонент панели для уведомлений",displayName:"NotificationPanel",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Заголовок панели",name:"title",required:!0,type:{name:"string"}},settings:{defaultValue:null,description:"Кнопка настроек и выпадающий список",name:"settings",required:!1,type:{name:"NotificationPanelSettingsProps"}},chips:{defaultValue:null,description:"Чипы для фильтрации",name:"chips",required:!1,type:{name:'Omit<ChipToggleProps, "data-test-id" | "size">[]'}},readAllButton:{defaultValue:null,description:'Кнопка в "шапке" панели',name:"readAllButton",required:!1,type:{name:'(Omit<ButtonFunctionProps, "data-test-id"> & { onClick: MouseEventHandler<HTMLElement>; })'}},footerButton:{defaultValue:null,description:"Кнопка внизу панели",name:"footerButton",required:!1,type:{name:"{ label: string; onClick: MouseEventHandler<HTMLButtonElement>; }"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},loading:{defaultValue:null,description:"Состояние загрузки",name:"loading",required:!1,type:{name:"boolean"}},content:{defaultValue:null,description:"Контент для отрисовки (e.g NotificationCard | NotificationPanel.Blank)",name:"content",required:!1,type:{name:"ReactNode"}},skeletonsAmount:{defaultValue:{value:"2"},description:"Количество скелетонов карточек для отображения при загрузке",name:"skeletonsAmount",required:!1,type:{name:"number"}},scrollEndRef:{defaultValue:null,description:"Ссылка на элемент, обозначающий самый конец прокручиваемого списка",name:"scrollEndRef",required:!1,type:{name:"RefObject<HTMLDivElement>"}},scrollContainerRef:{defaultValue:null,description:"Ссылка на контейнер, который скроллится",name:"scrollContainerRef",required:!1,type:{name:"RefObject<HTMLElement>"}}}}}catch{}try{o.Blank.displayName="NotificationPanel.Blank",o.Blank.__docgenInfo={description:"",displayName:"NotificationPanel.Blank",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Заголовок",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"Подзаголовок",name:"description",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка",name:"icon",required:!1,type:{name:'Pick<IconPredefinedProps, "appearance" | "icon" | "decor">'}}}}}catch{}try{o.Divider.displayName="NotificationPanel.Divider",o.Divider.__docgenInfo={description:"",displayName:"NotificationPanel.Divider",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"Текст разделителя",name:"text",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const vt={title:"Components/Notification",component:o},F={All:"all",Unread:"unread"},Be=({amount:t,readAllButton:i,chips:u,footerButton:r,loading:p,showDivider:B,...l})=>{const[s,f]=c.useState(F.All),[_,D]=c.useState(!1),y=c.useMemo(()=>K(t),[t]),g=c.useMemo(()=>s===F.Unread?y.filter(n=>n.unread):_?y.map(n=>({...n,unread:!1})):y.sort((n,h)=>Number(h.unread??0)-Number(n.unread??0)),[_,s,y]),a=c.useMemo(()=>({notRead:g.filter(n=>n.unread),read:g.filter(n=>!n.unread)}),[g]),N=!g.length&&!p,M=()=>{D(n=>!n)},x=n=>n.map(h=>c.createElement(G,{...h,"data-test-id":q.card,key:h.id}));return e.jsx("div",{className:U.pageWrapper,"data-resizable":!0,children:e.jsx(o,{...l,readAllButton:i&&{...i,onClick:M},chips:u==null?void 0:u.map(n=>({...n,checked:n.label===s,onChange(){f(n.label)}})),loading:p,content:e.jsxs(e.Fragment,{children:[N&&e.jsx(o.Blank,{icon:{icon:ie},title:"No notifications",description:`Here you will see new event notifications
when something happens`,"data-test-id":q.blank}),!N&&e.jsx(e.Fragment,{children:B&&s==="all"?e.jsxs(e.Fragment,{children:[x(a.notRead),!!(a.notRead.length&&a.read.length)&&e.jsx(o.Divider,{text:"Readed"}),x(a.read)]}):x(g)})]}),footerButton:r&&{...r,onClick(){}}})})},A={render:Be,args:{...$,chips:[{label:F.All,checked:!0},{label:F.Unread,checked:!1}],settings:{button:{onClick(){}},actions:[{content:{option:"setting 1"},onClick:V},{content:{option:"setting 2"},onClick:V}]},showDivider:!1},argTypes:{amount:{name:"[Stories]: Amount of cards in the panel",control:{type:"range",min:0,max:100,step:1}},showDivider:{name:"[Stories]: Show divider after unread cards"}},parameters:{readme:{sidebar:[`Latest version: ${T.version}`,L,z]},packageName:T.name,design:{name:"Figma",type:"figma",url:"https://www.figma.com/file/jtGxAPvFJOMir7V0eQFukN/Snack-UI-Kit-1.1.0?node-id=41%3A209587&mode=design"}}};var I,w,R;A.parameters={...A.parameters,docs:{...(I=A.parameters)==null?void 0:I.docs,source:{originalSource:`{
  render: Template,
  args: {
    ...NOTIFICATION_PANEL_PROPS_MOCK,
    chips: [{
      label: CHIP_FILTER.All,
      checked: true
    }, {
      label: CHIP_FILTER.Unread,
      checked: false
    }],
    settings: {
      button: {
        onClick() {}
      },
      actions: [{
        content: {
          option: 'setting 1'
        },
        onClick: handleActionClick
      }, {
        content: {
          option: 'setting 2'
        },
        onClick: handleActionClick
      }]
    },
    showDivider: false
  },
  argTypes: {
    amount: {
      name: '[Stories]: Amount of cards in the panel',
      control: {
        type: 'range',
        min: 0,
        max: 100,
        step: 1
      }
    },
    showDivider: {
      name: '[Stories]: Show divider after unread cards'
    }
  },
  parameters: {
    readme: {
      sidebar: [\`Latest version: \${componentPackage.version}\`, componentReadme, componentChangelog]
    },
    packageName: componentPackage.name,
    design: {
      name: 'Figma',
      type: 'figma',
      url: 'https://www.figma.com/file/jtGxAPvFJOMir7V0eQFukN/Snack-UI-Kit-1.1.0?node-id=41%3A209587&mode=design'
    }
  }
}`,...(R=(w=A.parameters)==null?void 0:w.docs)==null?void 0:R.source}}};export{vt as default,A as notificationPanel};
