import{j as f}from"./jsx-runtime-BTJTZTIL.js";import{c as Q}from"./index-DUmpqB7p.js";import{c as N,g as de}from"./_commonjsHelpers-D6-XlEtG.js";import{r as h}from"./index-CJ_LmFaV.js";import{u as fe}from"./useIsomorphicLayoutEffect-BAXQmlEq.js";import{e as Y}from"./componentPropsProcessors-UJEZy8aQ.js";import{T as Z}from"./Tooltip-BNp3usZT.js";var O,J;function ce(){if(J)return O;J=1;var t="Expected a function",n=NaN,o="[object Symbol]",E=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,l=/^0o[0-7]+$/i,p=parseInt,y=typeof N=="object"&&N&&N.Object===Object&&N,a=typeof self=="object"&&self&&self.Object===Object&&self,m=y||a||Function("return this")(),x=Object.prototype,T=x.toString,S=Math.max,te=Math.min,F=function(){return m.Date.now()};function ue(e,r,i){var d,g,B,b,s,_,C=0,P=!1,A=!1,V=!0;if(typeof e!="function")throw new TypeError(t);r=G(r)||0,j(i)&&(P=!!i.leading,A="maxWait"in i,B=A?S(G(i.maxWait)||0,r):B,V="trailing"in i?!!i.trailing:V);function I(u){var D=d,H=g;return d=g=void 0,C=u,b=e.apply(H,D),b}function ie(u){return C=u,s=setTimeout(q,r),P?I(u):b}function le(u){var D=u-_,H=u-C,X=r-D;return A?te(X,B-H):X}function z(u){var D=u-_,H=u-C;return _===void 0||D>=r||D<0||A&&H>=B}function q(){var u=F();if(z(u))return U(u);s=setTimeout(q,le(u))}function U(u){return s=void 0,V&&d?I(u):(d=g=void 0,b)}function oe(){s!==void 0&&clearTimeout(s),C=0,d=_=g=s=void 0}function se(){return s===void 0?b:U(F())}function M(){var u=F(),D=z(u);if(d=arguments,g=this,_=u,D){if(s===void 0)return ie(_);if(A)return s=setTimeout(q,r),I(_)}return s===void 0&&(s=setTimeout(q,r)),b}return M.cancel=oe,M.flush=se,M}function re(e,r,i){var d=!0,g=!0;if(typeof e!="function")throw new TypeError(t);return j(i)&&(d="leading"in i?!!i.leading:d,g="trailing"in i?!!i.trailing:g),ue(e,r,{leading:d,maxWait:r,trailing:g})}function j(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function ne(e){return!!e&&typeof e=="object"}function ae(e){return typeof e=="symbol"||ne(e)&&T.call(e)==o}function G(e){if(typeof e=="number")return e;if(ae(e))return n;if(j(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=j(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(E,"");var i=v.test(e);return i||l.test(e)?p(e.slice(2),i?2:8):c.test(e)?n:+e}return O=re,O}var pe=ce();const ee=de(pe),$=t=>t?t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth:!1,me=[{potentialDelimiterWidth:.5,leftHalfDelta:0,rightHalfDelta:0},{potentialDelimiterWidth:1,leftHalfDelta:0,rightHalfDelta:0},{potentialDelimiterWidth:1,leftHalfDelta:.5,rightHalfDelta:0},{potentialDelimiterWidth:1,leftHalfDelta:0,rightHalfDelta:.5},{potentialDelimiterWidth:2,leftHalfDelta:0,rightHalfDelta:0},{potentialDelimiterWidth:2,leftHalfDelta:1,rightHalfDelta:0},{potentialDelimiterWidth:2,leftHalfDelta:0,rightHalfDelta:1},{potentialDelimiterWidth:3,leftHalfDelta:0,rightHalfDelta:0},{potentialDelimiterWidth:3,leftHalfDelta:1,rightHalfDelta:0},{potentialDelimiterWidth:3,leftHalfDelta:0,rightHalfDelta:1},{potentialDelimiterWidth:4,leftHalfDelta:0,rightHalfDelta:0}],ge="...",he=({text:t,element:n,truncatedElement:o})=>{if(n&&o&&$(n)){const E=n.scrollWidth/t.length;let c=t;for(const{potentialDelimiterWidth:v,leftHalfDelta:l,rightHalfDelta:p}of me){const y=Math.floor((n.offsetWidth/E-v)/2),a=t.slice(0,y-l),m=t.slice(t.length-y+p,t.length);if(c=`${a}${ge}${m}`,o.innerHTML=c,o.scrollWidth<=n.offsetWidth-1)break}return c}return t},Ee="_wrapper_9yryq_1",ve="_truncatedText_9yryq_10",ye="_fullText_9yryq_20",De="_textContainer_9yryq_29",W={wrapper:Ee,truncatedText:ve,fullText:ye,textContainer:De};function w({text:t,className:n,hideTooltip:o,placement:E,...c}){const[v,l]=h.useState(!1),[p,y]=h.useState(t),a=h.useRef(null),m=h.useRef(null);h.useEffect(()=>{const T=ee(()=>{y(he({element:a.current,truncatedElement:m.current,text:t})),l($(a.current))},50);T();const S=new ResizeObserver(T);return a.current&&S.observe(a.current),()=>{S.disconnect()}},[v,t,o]);const x=f.jsxs(f.Fragment,{children:[f.jsx("span",{ref:a,className:W.fullText,"data-test-id":"full-text",children:t}),f.jsx("span",{ref:m,className:W.truncatedText,"data-test-id":"truncated-text",children:p})]});return f.jsx("span",{className:Q(W.wrapper,n),...Y(c),children:v&&!o?f.jsx(Z,{tip:t,placement:E,hoverDelayOpen:500,triggerClassName:W.textContainer,children:x}):x})}try{w.displayName="TruncateStringMiddle",w.__docgenInfo={description:"",displayName:"TruncateStringMiddle",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},hideTooltip:{defaultValue:null,description:"",name:"hideTooltip",required:!1,type:{name:"boolean"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"left-start"'},{value:'"left-end"'},{value:'"right"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"top"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom"'},{value:'"bottom-start"'},{value:'"bottom-end"'}]}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}}}}}catch{}const Te="_text1Line_2nt08_1",_e="_ellipsis_2nt08_9",xe="_text2AndMoreLines_2nt08_13",be="_tooltipTrigger_2nt08_24",L={text1Line:Te,ellipsis:_e,text2AndMoreLines:xe,tooltipTrigger:be};function k({text:t,className:n,hideTooltip:o,maxLines:E=1,placement:c,...v}){const l=h.useRef(null),[p,y]=h.useState(!1),a=h.useCallback(()=>{y($(l.current))},[]);fe(()=>{l.current&&a()},[t,a]),h.useEffect(()=>{const x=ee(()=>{a()},50),T=new ResizeObserver(x);return l.current&&(a(),T.observe(l.current)),()=>{T.disconnect()}},[p,o,a]);const m=f.jsx("span",{ref:l,className:Q(E>1?L.text2AndMoreLines:L.text1Line,n,{[L.ellipsis]:!l.current||p}),style:{"--max-lines":E},...Y(v),children:t});return p&&!o?f.jsx(Z,{tip:t,placement:c,hoverDelayOpen:500,triggerClassName:L.tooltipTrigger,children:m}):m}try{k.displayName="TruncateStringEnd",k.__docgenInfo={description:"",displayName:"TruncateStringEnd",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},hideTooltip:{defaultValue:null,description:"Скрывать ли тултип с полным текстом",name:"hideTooltip",required:!1,type:{name:"boolean"}},maxLines:{defaultValue:{value:"1"},description:"Максимальное кол-во строк, до которого может сворачиваться текст.",name:"maxLines",required:!1,type:{name:"number"}},placement:{defaultValue:null,description:"Положение тултипа относительно обрезанного текста.",name:"placement",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"left-start"'},{value:'"left-end"'},{value:'"right"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"top"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom"'},{value:'"bottom-start"'},{value:'"bottom-end"'}]}},text:{defaultValue:null,description:"Текст, который будет обрезаться",name:"text",required:!0,type:{name:"string"}}}}}catch{}const R={Middle:"middle",End:"end"};function K({variant:t=R.End,...n}){switch(t){case R.Middle:return f.jsx(w,{...n});case R.End:default:return f.jsx(k,{...n})}}try{K.displayName="TruncateString",K.__docgenInfo={description:"",displayName:"TruncateString",props:{variant:{defaultValue:{value:"end"},description:"Вариант обрезания строки: <br> - `End` - с конца\n<br> - `Middle` - по середине",name:"variant",required:!1,type:{name:"enum",value:[{value:'"middle"'},{value:'"end"'}]}},"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},hideTooltip:{defaultValue:null,description:"Скрывать ли тултип с полным текстом",name:"hideTooltip",required:!1,type:{name:"boolean"}},maxLines:{defaultValue:null,description:"Максимальное кол-во строк, до которого может сворачиваться текст.",name:"maxLines",required:!1,type:{name:"number"}},placement:{defaultValue:null,description:"Положение тултипа относительно обрезанного текста.",name:"placement",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"left-start"'},{value:'"left-end"'},{value:'"right"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"top"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom"'},{value:'"bottom-start"'},{value:'"bottom-end"'}]}},text:{defaultValue:null,description:"Текст, который будет обрезаться",name:"text",required:!0,type:{name:"string"}}}}}catch{}export{K as T,R as V};
