import{j as e}from"./jsx-runtime-BTJTZTIL.js";import{c as x}from"./index-DUmpqB7p.js";import{m as nu}from"./index-B7wZyJkK.js";import{r as o}from"./index-CJ_LmFaV.js";import{S as lu}from"./constants-9uwKbtvo.js";import{F as ru,g as iu,C as su,V as ou}from"./FieldDecorator-CLLFAGM0.js";import{P as pu}from"./index-CwHIobxP.js";import{M as du}from"./index-3XDw48l5.js";import{u as fu}from"./LocaleProvider-CyhbxqE1.js";import{u as mu}from"./useValueControl-CNLw7ht-.js";import{u as cu,a as Eu}from"./usePrefix-BmEKZSSL.js";import{e as Fu}from"./componentPropsProcessors-UJEZy8aQ.js";import{T as Bu}from"./Tooltip-BNp3usZT.js";import{F as vu}from"./FieldContainerPrivate-C57rtyBq.js";import{I as hu}from"./InputPrivate-C6kWfrUd.js";import{B as C}from"./ButtonFunction-DkDZEdUd.js";const gu="_stepper_bu7sr_1",Du="_button_bu7sr_5",bu="_trigger_bu7sr_12",Vu="_wrap_bu7sr_16",_u="_prefixWrapper_bu7sr_23",Iu="_postfixWrapper_bu7sr_27",i={stepper:gu,button:Du,trigger:bu,wrap:Vu,prefixWrapper:_u,postfixWrapper:Iu},yu=2e3,xu=(s,p)=>s>0?s:p<0?p:0,Cu={s:8,m:9,l:10},A=o.forwardRef(({id:s,name:p,value:T,min:t=Number.NEGATIVE_INFINITY,max:a=Number.POSITIVE_INFINITY,step:F=1,disabled:n=!1,readonly:l=!1,allowMoreThanLimits:D=!0,onChange:N,onFocus:B,onBlur:v,className:q,label:S,labelTooltip:w,labelTooltipPlacement:P,required:j=!1,caption:M,hint:R,showHintIcon:W,size:d=lu.S,validationState:O=ou.Default,error:b,prefix:L,postfix:H,...k},K)=>{const{t:V}=fu("Fields"),[r=0,f]=mu({value:T,defaultValue:xu(t,a),onChange:N}),[G,h]=o.useState(!1),[Y,m]=o.useState(""),g=o.useRef(),_=o.useRef(null),$=typeof t=="number"&&r<=t||l||n,z=typeof a=="number"&&r>=a||l||n,c=cu({prefix:L,disabled:n}),E=Eu({postfix:H,disabled:n}),I=iu({validationState:O,error:b}),y=u=>{f(u),h(!0),g.current=setTimeout(()=>{h(!1),m("")},yu)};o.useEffect(()=>()=>{clearTimeout(g.current)},[]);const U=u=>{D||(a!==void 0&&r>a&&(m(`${V("limitTooltip.max")}${a}`),y(a)),t!==void 0&&r<t&&(m(`${V("limitTooltip.min")}${t}`),y(t))),v==null||v(u)},Z=u=>{clearTimeout(g.current),h(!1),m(""),B==null||B(u)},J=(u,au)=>f(Number(u),au),Q=()=>{},X=u=>{u.preventDefault(),u.stopPropagation(),f(Math.min(Math.max(t,r-F),a))},uu=u=>{u.preventDefault(),u.stopPropagation(),f(Math.max(Math.min(a,r+F),t))},eu=()=>{},tu=()=>{};return e.jsx(ru,{className:q,label:S,labelTooltip:w,labelTooltipPlacement:P,labelFor:s,required:j,caption:M,hint:R,disabled:n,readonly:l,showHintIcon:W,size:d,validationState:I,error:b,...Fu(k),children:e.jsx(Bu,{tip:Y,open:D?!1:G,"data-test-id":"field-stepper__limit-tooltip",triggerClassName:i.trigger,children:e.jsx(vu,{size:d,validationState:I,disabled:n,readonly:l,variant:su.SingleLine,inputRef:_,prefix:e.jsx(C,{tabIndex:-1,size:"xs",className:i.button,icon:e.jsx(du,{}),onClick:X,onKeyDown:eu,disabled:$,"data-test-id":"field-stepper__minus-button"}),postfix:e.jsx(C,{tabIndex:-1,size:"xs",className:i.button,icon:e.jsx(pu,{}),onClick:uu,onKeyDown:tu,disabled:z,"data-test-id":"field-stepper__plus-button"}),children:e.jsxs("div",{className:i.wrap,children:[e.jsx("div",{className:x({[i.prefixWrapper]:c.show}),children:c.show&&c.render({key:c.id})}),e.jsx("div",{style:{width:String(r).length*Cu[d],maxWidth:"100%"},children:e.jsx(hu,{ref:nu(K,_),className:i.stepper,"data-size":d,value:String(r),tabIndex:0,onKeyDown:Q,onChange:J,onBlur:U,onFocus:Z,disabled:n,readonly:l,type:"number",id:s,step:F,name:p,min:t,max:a,"data-test-id":"field-stepper__input"})}),e.jsx("div",{className:x({[i.postfixWrapper]:E.show}),children:E.show&&E.render({key:E.id})})]})})})})});try{A.displayName="FieldStepper",A.__docgenInfo={description:"",displayName:"FieldStepper",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"Значение поля",name:"value",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"Колбек смены значения",name:"onChange",required:!1,type:{name:"((value: number, e?: ChangeEvent<HTMLInputElement>) => void)"}},step:{defaultValue:{value:"1"},description:"Шаг поля",name:"step",required:!1,type:{name:"number"}},allowMoreThanLimits:{defaultValue:{value:"true"},description:"Можно ли вводить c клавиатуры числа, выходящие за пределы min/max",name:"allowMoreThanLimits",required:!1,type:{name:"boolean"}},prefix:{defaultValue:null,description:"Произвольный префикс для поля",name:"prefix",required:!1,type:{name:"ReactNode"}},postfix:{defaultValue:null,description:"Произвольный постфикс для поля",name:"postfix",required:!1,type:{name:"ReactNode"}},id:{defaultValue:null,description:"Значение html-атрибута id",name:"id",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"Значение html-атрибута name",name:"name",required:!1,type:{name:"string"}},onFocus:{defaultValue:null,description:"Колбек обработки получения фокуса",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onBlur:{defaultValue:null,description:"Колбек обработки потери фокуса",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},disabled:{defaultValue:{value:"false"},description:"Является ли поле деактивированным",name:"disabled",required:!1,type:{name:"boolean"}},max:{defaultValue:{value:"Number.POSITIVE_INFINITY"},description:"Максимальное значение поля",name:"max",required:!1,type:{name:"number"}},min:{defaultValue:{value:"Number.NEGATIVE_INFINITY"},description:"Минимальное значение поля",name:"min",required:!1,type:{name:"number"}},readonly:{defaultValue:{value:"false"},description:"Является ли поле доступным только для чтения",name:"readonly",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},caption:{defaultValue:null,description:"Подпись справа от лейбла",name:"caption",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Лейбл",name:"label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"s"},description:"Размер",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'}]}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},labelTooltip:{defaultValue:null,description:"Всплывающая подсказка лейбла",name:"labelTooltip",required:!1,type:{name:"ReactNode"}},required:{defaultValue:{value:"false"},description:"Является ли поле обязательным",name:"required",required:!1,type:{name:"boolean"}},hint:{defaultValue:null,description:"Подсказка внизу",name:"hint",required:!1,type:{name:"string"}},showHintIcon:{defaultValue:null,description:"Отображать иконку подсказки",name:"showHintIcon",required:!1,type:{name:"boolean"}},validationState:{defaultValue:{value:"default"},description:"Состояние валидации",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"warning"'},{value:'"success"'},{value:'"default"'}]}},labelTooltipPlacement:{defaultValue:{value:"top"},description:"Расположение подсказки лейбла",name:"labelTooltipPlacement",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"left-start"'},{value:'"left-end"'},{value:'"right"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"top"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom"'},{value:'"bottom-start"'},{value:'"bottom-end"'}]}}}}}catch{}export{A as F};
