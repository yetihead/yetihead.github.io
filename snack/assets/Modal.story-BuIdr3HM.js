import{j as u}from"./jsx-runtime-BTJTZTIL.js";import{r as k}from"./index-CJ_LmFaV.js";import{e as L,f as M,M as g,h as R,S as b,i as G,T as B,A as U,c as h,a as $,b as Y,d as w,D as t,j as x,k as d,g as J,P as I}from"./utils-CKXleIth.js";import{T as P}from"./TruncateString-BPmgFnBz.js";import{T as K}from"./Typography-DmSN6cv6.js";import{L as W}from"./Link-CwRw2bLJ.js";import{B as S}from"./ButtonFilled-DhU1yp3w.js";import{B as H}from"./ButtonOutline-CzsrdEVF.js";import{B as Q}from"./ButtonSimple-3o_8XXbq.js";import"./index-ChsGqxH_.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-DUmpqB7p.js";import"./index-DdXvKv-Q.js";import"./index-Chjiymov.js";import"./componentPropsProcessors-UJEZy8aQ.js";import"./index-BQAaeyfQ.js";import"./IconPredefined-yX8Rdo-2.js";import"./QuestionTooltip-Dy38_KYX.js";import"./index-JZGyZbA2.js";import"./PopoverPrivate-CnKgsFAm.js";import"./index-Bxu_udwM.js";import"./isBrowser-C2N6XvuH.js";import"./useIsomorphicLayoutEffect-BAXQmlEq.js";import"./Tooltip-BNp3usZT.js";import"./index-B9oUDl45.js";import"./Scroll-B3e6J9cA.js";import"./useModalOpenState-DLLSq6cJ.js";import"./index-B_WE0pTs.js";import"./Sprite-DoNyyhE0.js";import"./sprite.symbol-DpN2ERsh.js";import"./index-C-NxZ9RO.js";import"./index-Dz039XZe.js";import"./index-HYofs7FJ.js";import"./index-DtRrUciF.js";import"./index-BLj3vrxU.js";import"./index-BKaanG2n.js";import"./index-DLGJiw2b.js";import"./index-C7IVzcIX.js";import"./index-CX1lIXbQ.js";import"./index-DLRniMSR.js";import"./index-BJ2Oj32Z.js";import"./index-0zxx_KqD.js";import"./index-NU8U5csw.js";import"./index-I1zimRE2.js";import"./index-BIeLB8C9.js";import"./index-BcKv4fI4.js";import"./index-CIcT2jya.js";import"./index-3XDw48l5.js";import"./index-6PN_JoHT.js";import"./index-C9_U387z.js";import"./index-CwHIobxP.js";import"./index-Baw9oej9.js";import"./index-BJDjEDgt.js";import"./index-Drk0xmYR.js";import"./index-zbp_5bxn.js";import"./utils-Ct1D1GSP.js";import"./Counter-dO15w468.js";import"./Sun-CLMO8Tpr.js";import"./constants-BAH7I9kc.js";const Z="_modalFooter_dm4z1_1",X="_footerButton_dm4z1_1",C={modalFooter:Z,footerButton:X};function i({open:l,onClose:n,size:a=b.S,mode:F=R.Regular,align:o=U.Default,title:r,titleTooltip:m,subtitle:c,picture:e,content:A,approveButton:s,cancelButton:E,additionalButton:j,disclaimer:f,truncate:p,className:N,...V}){const v=L({align:o,size:a}),y=M({align:o,size:a}),q=G({size:a,picture:e});return u.jsxs(g,{open:l,onClose:n,size:a,mode:F,className:N,...V,children:[u.jsx(g.Header,{title:u.jsx(P,{text:r,maxLines:(p==null?void 0:p.title)||1}),titleTooltip:m,subtitle:c?u.jsx(P,{text:c,maxLines:(p==null?void 0:p.subtitle)||2}):void 0,picture:q,align:v.header}),!!A&&u.jsx(g.Body,{content:A,align:v.body}),u.jsx(g.Footer,{actions:u.jsxs(u.Fragment,{children:[u.jsx(S,{appearance:"primary",...s,size:y,className:C.footerButton,"data-test-id":B.approveButton}),E&&u.jsx(H,{appearance:"neutral",...E,size:y,className:C.footerButton,"data-test-id":B.cancelButton}),j&&u.jsx(Q,{appearance:"neutral",...j,size:y,className:C.footerButton,"data-test-id":B.additionalButton})]}),disclaimer:f&&u.jsxs(u.Fragment,{children:[u.jsx(K.SansBodyS,{"data-test-id":B.disclaimerText,children:f.text}),f.link&&u.jsx(W,{...f.link,size:"s","data-test-id":B.disclaimerLink})]}),align:v.footer,className:C.modalFooter})]})}try{i.displayName="Modal",i.__docgenInfo={description:"",displayName:"Modal",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"CSS-класс",name:"className",required:!1,type:{name:"string"}},onClose:{defaultValue:null,description:"Колбек закрытия компонента.",name:"onClose",required:!0,type:{name:"() => void"}},open:{defaultValue:null,description:"Управляет состоянием показан/не показан.",name:"open",required:!0,type:{name:"boolean"}},closeOnPopstate:{defaultValue:null,description:"Закрывать при переходе по истории браузера",name:"closeOnPopstate",required:!1,type:{name:"boolean"}},mode:{defaultValue:{value:"regular"},description:"Режим отображения модального окна:\n<br> - __`Regular`__ -  есть кнопка закрытия, клик на оверлей и нажатие кнопки `Esc` закрывают модалку\n<br> - __`Aggressive`__ - есть кнопка закрытия, но выключен клик на оверлей и не работает закрытие по клавише `Esc`\n<br> - __`Forced`__ - закрыть модальное окно можно только по нажатию на кнопку действия в нижней части",name:"mode",required:!1,type:{name:"enum",value:[{value:'"regular"'},{value:'"aggressive"'},{value:'"forced"'}]}},title:{defaultValue:null,description:"Заголовок модального окна",name:"title",required:!0,type:{name:"string"}},titleTooltip:{defaultValue:null,description:"Всплывающая подсказка для заголовка",name:"titleTooltip",required:!1,type:{name:"ReactNode"}},subtitle:{defaultValue:null,description:"Подзаголовок",name:"subtitle",required:!1,type:{name:"string"}},content:{defaultValue:null,description:"Содержимое модального окна",name:"content",required:!1,type:{name:"ReactNode"}},approveButton:{defaultValue:null,description:"Основная кнопка действия",name:"approveButton",required:!0,type:{name:'Omit<ButtonFilledProps, "data-test-id" | "size">'}},cancelButton:{defaultValue:null,description:"Кнопка отмены",name:"cancelButton",required:!1,type:{name:'Omit<ButtonOutlineProps, "data-test-id" | "size">'}},additionalButton:{defaultValue:null,description:"Вторая кнопка действия",name:"additionalButton",required:!1,type:{name:'Omit<ButtonSimpleProps, "data-test-id" | "size">'}},disclaimer:{defaultValue:null,description:"Небольшой текст под кнопками футера с возможностью передать дополнительно ссылку",name:"disclaimer",required:!1,type:{name:'{ text: string; link?: PickLinkProps<LinkElement, "text" | "as">; }'}},truncate:{defaultValue:{value:"'{ <br>title: 1; <br>subtitle: 2; }'"},description:"Максимальное кол-во строк\n<br> - `title` - в заголовке\n<br> - `subtitle` - в подзаголовке",name:"truncate",required:!1,type:{name:"{ title?: number; subtitle?: number; } | undefined"}},size:{defaultValue:{value:"s"},description:"Размер",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'}]}},align:{defaultValue:{value:"default"},description:"Выравнивание, для разных размеров доступны разные значения\n<br> для size=`s` - все\n<br> для size=`m` - align=`default | center`\n<br> для size=`l` - align=`default`",name:"align",required:!1,type:{name:"enum",value:[{value:'"vertical"'},{value:'"center"'},{value:'"default"'}]}},picture:{defaultValue:null,description:"Можно передать иконку из пакета `@snack-uikit/icon-predefined`, или путь к картинке и атрибут `alt`",name:"picture",required:!1,type:{name:"JSXElementConstructor<{ size?: number; className?: string; }> | ModalHeaderImage | undefined"}}}}}catch{}const uu="_wrapper_13jwk_1",eu="_buttons_13jwk_14",_={wrapper:uu,buttons:eu},{useArgs:tu}=__STORYBOOK_MODULE_PREVIEW_API__,l4={title:"Components/Modal",component:i},ou=({showIcon:l,showImage:n,align:a,alignM:F,...o})=>{const[r,m]=k.useState();k.useEffect(()=>{m(o.open?x:void 0)},[o.open]);const c=s=>{const E=s.currentTarget.getAttribute("data-test-id");E&&m(E.replace("open-",""))},e=()=>m(void 0),A=o.size===b.M?F:a;return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:_.wrapper,children:["Controlled:",u.jsx(S,{size:"m",label:"Open modal",onClick:c,"data-test-id":x})]}),u.jsx("div",{className:_.wrapper,children:u.jsxs("div",{className:_.buttons,children:["Examples:",Object.values(d).map(s=>u.jsx(S,{size:"m",label:`Open ${s}`,onClick:c,"data-test-id":`open-${s}`},s))]})}),u.jsx(i,{...o,align:A,picture:J({showImage:n,showIcon:l,icon:o.icon,picture:o.picture}),open:r===x,onClose:e,approveButton:{...o.approveButton,onClick:e},cancelButton:o.cancelButton?{...o.cancelButton,onClick:e}:void 0,additionalButton:o.additionalButton?{...o.additionalButton,onClick:e}:void 0}),u.jsx(i,{...t,open:r===d.withIcon,picture:I.icon,onClose:e,approveButton:{...t.approveButton,onClick:e},cancelButton:{...t.cancelButton,onClick:e},additionalButton:{...t.additionalButton,onClick:e}}),u.jsx(i,{...t,open:r===d.withImage,picture:I.image,onClose:e,approveButton:{...t.approveButton,onClick:e},cancelButton:{...t.cancelButton,onClick:e},additionalButton:{...t.additionalButton,onClick:e}}),u.jsx(i,{...t,content:void 0,mode:"aggressive",open:r===d.aggressive,onClose:e,approveButton:{...t.approveButton,onClick:e},cancelButton:{...t.cancelButton,onClick:e},additionalButton:{...t.additionalButton,onClick:e}}),u.jsx(i,{...t,content:void 0,mode:"forced",open:r===d.forced,onClose:e,approveButton:{...t.approveButton,onClick:e},cancelButton:{...t.cancelButton,onClick:e},additionalButton:{...t.additionalButton,onClick:e}}),u.jsx(i,{title:"Удалить элемент?",subtitle:"После удаления элемента он станет недоступен",mode:"forced",open:r===d.deleteModal,onClose:e,approveButton:{label:"Удалить",appearance:"destructive",onClick:e},additionalButton:{label:"Отмена",onClick:e}})]})},D={render:ou,decorators:[l=>{const[n,a]=tu();return k.useEffect(()=>{(n.size!==b.S||n.showImage)&&a({showIcon:!1})},[a,n.showImage,n.size]),u.jsx(l,{...n})}],args:{...t,disclaimer:{text:"Disclaimer Text Written in no more than 2 lines",link:{text:"Link text",href:"#"}}},argTypes:{...w,showIcon:{...w.showIcon,if:{arg:"size",eq:"s"}}},parameters:{readme:{sidebar:[`Latest version: ${h.version}`,$,Y]},packageName:h.name,design:{name:"Figma",type:"figma",url:"https://www.figma.com/file/jtGxAPvFJOMir7V0eQFukN/Snack-UI-Kit-1.1.0?node-id=41%3A205426&mode=design"}}};var T,z,O;D.parameters={...D.parameters,docs:{...(T=D.parameters)==null?void 0:T.docs,source:{originalSource:`{
  render: Template,
  decorators: [(Story: StoryFn<StoryProps>) => {
    const [storyArgs, setStoryArgs] = useArgs<StoryProps>();
    useEffect(() => {
      if (storyArgs.size !== SIZE.S || storyArgs.showImage) {
        setStoryArgs({
          showIcon: false
        });
      }
    }, [setStoryArgs, storyArgs.showImage, storyArgs.size]);
    return <Story {...storyArgs} />;
  }],
  args: {
    ...DEFAULT_ARGS,
    disclaimer: {
      text: 'Disclaimer Text Written in no more than 2 lines',
      link: {
        text: 'Link text',
        href: '#'
      }
    }
  },
  argTypes: {
    ...ARG_TYPES,
    showIcon: {
      ...ARG_TYPES.showIcon,
      if: {
        arg: 'size',
        eq: 's'
      }
    }
  },
  parameters: {
    readme: {
      sidebar: [\`Latest version: \${componentPackage.version}\`, componentReadme, componentChangelog]
    },
    packageName: componentPackage.name,
    design: {
      name: 'Figma',
      type: 'figma',
      url: 'https://www.figma.com/file/jtGxAPvFJOMir7V0eQFukN/Snack-UI-Kit-1.1.0?node-id=41%3A205426&mode=design'
    }
  }
}`,...(O=(z=D.parameters)==null?void 0:z.docs)==null?void 0:O.source}}};export{l4 as default,D as modal};
